# Garnix Configuration
# Documentation: https://garnix.io/docs/yaml
#
# IMPORTANT: Garnix is currently ignoring nixConfig, so it's not using the IOG cache.
# This causes GHC 9.6.7 to be built from source, which fails with compilation errors.
#
# To fix: Contact Garnix support to enable --accept-flake-config for this repository,
# or check the Garnix dashboard for settings to trust flake config.
#
# Once the cache is working, re-enable the builds below.
builds:
  # Temporarily disabled: All builds requiring GHC fail because Garnix builds GHC from source
  # instead of using IOG cache. This affects:
  # - All packages (they depend on GHC)
  # - All devShells (they require GHC)
  # - All checks (they may require GHC)
  #
  # Uncomment these once Garnix cache is configured:
  # include:
  #   - "packages.x86_64-linux.*"
  #   - "packages.aarch64-linux.*"
  #   - "checks.x86_64-linux.*"
  #   - "checks.aarch64-linux.*"
  #   - "devShells.x86_64-linux.*"
  #   - "packages.aarch64-darwin.default"
  #   - "packages.aarch64-darwin.gimmel-exe"
  #   - "packages.aarch64-darwin.test-net"
  #   - "devShells.aarch64-darwin.default"

  # Only include static Linux x86_64 builds (these use musl and may work even without GHC cache)
  include:
    - "packages.x86_64-linux.static"
    - "packages.x86_64-linux.static-gimmel-exe"
    - "packages.x86_64-linux.static-test-net"